import{r as c,j as e,A as f,O as x,s as h}from"./index-TBdMmyB6.js";const b=30*60*1e3;function o(s){return`revista_article_${s}`}function j(s){try{const i=localStorage.getItem(o(s));if(!i)return null;const{article:t,timestamp:n}=JSON.parse(i);return Date.now()-n>b?(localStorage.removeItem(o(s)),null):t}catch{return null}}function v(s,i){try{localStorage.setItem(o(s),JSON.stringify({article:i,timestamp:Date.now()}))}catch{}}function y({slug:s}){const i=j(s),[t,n]=c.useState(i),[g,u]=c.useState(!i),[d,m]=c.useState([]);if(c.useEffect(()=>{async function a(){const{data:r,error:l}=await h.from("articles").select("*").eq("slug",s).maybeSingle();l?console.error("Error fetching article:",l):r&&(n(r),v(s,r)),u(!1)}a()},[s]),c.useEffect(()=>{async function a(){if(!t)return;const{data:r,error:l}=await h.from("articles").select("*").eq("category",t.category).neq("id",t.id).order("published_at",{ascending:!1}).limit(4);l?console.error("Error fetching recommended articles:",l):r&&r.length>=4?m(r):m([])}a()},[t]),g)return e.jsx(f,{});if(!t)return e.jsx("div",{className:"container-revista py-section",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h1",{className:"font-headline text-4xl font-bold text-revista-black mb-4",children:"Articol negăsit"}),e.jsx("p",{className:"text-revista-text/60",children:"Ne pare rău, articolul pe care îl căutați nu există."})]})});const p=new Date(t.published_at).toLocaleDateString("ro-RO",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsx("article",{className:"container-revista py-section",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"font-headline text-3xl md:text-4xl lg:text-5xl font-bold text-revista-black mb-6 md:mb-8 leading-tight",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 text-sm text-revista-text/70 mb-6 md:mb-8",children:[e.jsx("span",{className:"font-medium text-revista-black",children:t.author}),e.jsx("span",{className:"hidden md:inline",children:"•"}),e.jsx("time",{dateTime:t.published_at,className:"block md:inline",children:p}),e.jsx("span",{children:"•"}),e.jsx("a",{href:`#/${t.category.toLowerCase()}`,className:"text-revista-gold min-h-[44px] flex items-center",children:t.category})]}),e.jsx("div",{className:"border-t border-revista-text/10 mb-6 md:mb-8"}),t.image_url&&e.jsx(x,{src:t.image_url,alt:t.title,size:"large",priority:!0,className:"w-full aspect-[4/3] md:aspect-[16/9] mb-8 md:mb-12"}),e.jsx("div",{className:"prose prose-lg max-w-none",children:t.content.split(`

`).map((a,r)=>e.jsx("p",{className:"text-revista-text leading-[1.8] md:leading-relaxed mb-5 md:mb-6 text-base md:text-lg",children:a},r))})]})}),d.length>=4&&e.jsx("section",{className:"py-12 border-t border-revista-separator",children:e.jsxs("div",{className:"container-revista",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-t border-b border-revista-separator py-3",children:e.jsx("h2",{className:"font-sans text-lg lg:text-[1.35rem] uppercase tracking-[0.3em] text-revista-black font-medium text-center",children:"Citește și"})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:d.map(a=>e.jsxs("a",{href:`#/article/${a.slug}`,className:"group block",children:[e.jsx(x,{src:a.image_url,alt:a.title,size:"medium",hoverScale:!0,className:"w-full aspect-[3/4] mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-sans uppercase tracking-wider text-revista-gold",children:a.category}),e.jsx("h3",{className:"font-headline text-xl font-medium text-revista-black leading-tight group-hover:text-revista-gold transition-colors line-clamp-3",children:a.title}),e.jsxs("p",{className:"text-xs font-sans uppercase tracking-wide text-revista-text/60",children:["De ",a.author]})]})]},a.id))})]})})]})}export{y as default};
