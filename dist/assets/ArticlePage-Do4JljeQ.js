import{r as c,j as e,A as v,O as g,g as N,s as p}from"./index-NTK5VHrB.js";const y=30*60*1e3;function d(s){return`revista_article_${s}`}function D(s){try{const r=localStorage.getItem(d(s));if(!r)return null;const{article:n,timestamp:o}=JSON.parse(r);return Date.now()-o>y?(localStorage.removeItem(d(s)),null):n}catch{return null}}function w(s,r){try{localStorage.setItem(d(s),JSON.stringify({article:r,timestamp:Date.now()}))}catch{}}function _({slug:s}){const r=t=>({...t,excerpt:t.excerpt??"",content:t.content??"",placeholderDataUrl:t.placeholderDataUrl||N(t.image_url)}),n=D(s),o=n?r(n):null,[a,u]=c.useState(o),[f,b]=c.useState(!o),[m,x]=c.useState([]);if(c.useEffect(()=>{async function t(){const{data:l,error:i}=await p.from("articles").select("id, title, slug, category, author, excerpt, content, image_url, published_at").eq("slug",s).maybeSingle();if(i)console.error("Error fetching article:",i);else if(l){const h=r(l);u(h),w(s,h)}b(!1)}t()},[s]),c.useEffect(()=>{async function t(){if(!a)return;const{data:l,error:i}=await p.from("articles").select("id, title, slug, category, author, image_url, published_at").eq("category",a.category).neq("id",a.id).order("published_at",{ascending:!1}).limit(4);i?console.error("Error fetching recommended articles:",i):l&&l.length>=4?x(l.map(r)):x([])}t()},[a]),f)return e.jsx(v,{});if(!a)return e.jsx("div",{className:"container-revista py-section",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h1",{className:"font-headline text-4xl font-bold text-revista-black mb-4",children:"Articol negăsit"}),e.jsx("p",{className:"text-revista-text/60",children:"Ne pare rău, articolul pe care îl căutați nu există."})]})});const j=new Date(a.published_at).toLocaleDateString("ro-RO",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsx("article",{className:"container-revista py-section",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"font-headline text-3xl md:text-4xl lg:text-5xl font-bold text-revista-black mb-6 md:mb-8 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 text-sm text-revista-text/70 mb-6 md:mb-8",children:[e.jsx("span",{className:"font-medium text-revista-black",children:a.author}),e.jsx("span",{className:"hidden md:inline",children:"•"}),e.jsx("time",{dateTime:a.published_at,className:"block md:inline",children:j}),e.jsx("span",{children:"•"}),e.jsx("a",{href:`#/${a.category.toLowerCase()}`,className:"text-revista-gold min-h-[44px] flex items-center",children:a.category})]}),e.jsx("div",{className:"border-t border-revista-text/10 mb-6 md:mb-8"}),a.image_url&&e.jsx(g,{src:a.image_url,alt:a.title,size:"large",placeholderDataUrl:a.placeholderDataUrl,priority:!0,className:"w-full aspect-[4/3] md:aspect-[16/9] mb-8 md:mb-12"}),e.jsx("div",{className:"prose prose-lg max-w-none",children:a.content.split(`

`).map((t,l)=>e.jsx("p",{className:"text-revista-text leading-[1.8] md:leading-relaxed mb-5 md:mb-6 text-base md:text-lg",children:t},l))})]})}),m.length>=4&&e.jsx("section",{className:"py-12 border-t border-revista-separator",children:e.jsxs("div",{className:"container-revista",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-t border-b border-revista-separator py-3",children:e.jsx("h2",{className:"font-sans text-lg lg:text-[1.35rem] uppercase tracking-[0.3em] text-revista-black font-medium text-center",children:"Citește și"})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:m.map(t=>e.jsxs("a",{href:`#/article/${t.slug}`,className:"group block",children:[e.jsx(g,{src:t.image_url,alt:t.title,size:"medium",placeholderDataUrl:t.placeholderDataUrl,hoverScale:!0,className:"w-full aspect-[3/4] mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-sans uppercase tracking-wider text-revista-gold",children:t.category}),e.jsx("h3",{className:"font-headline text-xl font-medium text-revista-black leading-tight group-hover:text-revista-gold transition-colors line-clamp-3",children:t.title}),e.jsxs("p",{className:"text-xs font-sans uppercase tracking-wide text-revista-text/60",children:["De ",t.author]})]})]},t.id))})]})})]})}export{_ as default};
