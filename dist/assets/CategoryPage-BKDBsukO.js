import{r as o,j as e,C as b,O as n,g as k,s as D}from"./index-NTK5VHrB.js";const w=10*60*1e3;function d(t){return`revista_category_${t}`}function y(t){try{const a=localStorage.getItem(d(t));if(!a)return null;const{articles:i,timestamp:c}=JSON.parse(a);return Date.now()-c>w?(localStorage.removeItem(d(t)),null):i}catch{return null}}function S(t,a){try{localStorage.setItem(d(t),JSON.stringify({articles:a,timestamp:Date.now()}))}catch{}}function A({category:t,description:a}){var m;const i=s=>({...s,placeholderDataUrl:s.placeholderDataUrl||k(s.image_url)}),c=(m=y(t))==null?void 0:m.map(i),[r,g]=o.useState(c||[]),[u,v]=o.useState(!c);if(o.useEffect(()=>{async function s(){const{data:N,error:h}=await D.from("articles").select("id, title, slug, category, author, image_url, published_at").eq("category",t).order("published_at",{ascending:!1}).limit(28);if(h)console.error("Error fetching articles:",h);else{const p=(N||[]).map(i);g(p),S(t,p)}v(!1)}s()},[t]),u)return e.jsx(b,{category:t,description:a});if(r.length===0)return e.jsxs("div",{className:"container-revista py-section",children:[e.jsxs("div",{className:"max-w-3xl mb-12",children:[e.jsx("h1",{className:"font-headline text-5xl md:text-6xl font-bold text-revista-black mb-6",children:t}),e.jsx("p",{className:"text-lg text-revista-text/80 leading-relaxed",children:a})]}),e.jsx("div",{className:"text-center text-revista-text/60",children:"Nu există articole în această categorie."})]});const l=r[0],f=r.slice(1,3),j=r.slice(3,5),x=r.slice(5);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"container-revista py-section pb-40",children:[e.jsxs("div",{className:"max-w-3xl mb-12",children:[e.jsx("h1",{className:"font-headline text-5xl md:text-6xl font-bold text-revista-black mb-6",children:t}),e.jsx("p",{className:"text-lg text-revista-text/80 leading-relaxed",children:a})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 lg:gap-6 mb-16",children:[e.jsx("div",{className:"lg:col-span-3 space-y-10 lg:space-y-8 order-2 lg:order-1",children:f.map(s=>e.jsxs("a",{href:`#/article/${s.slug}`,className:"group cursor-pointer block pb-2",children:[e.jsx(n,{src:s.image_url,alt:s.title,size:"small",placeholderDataUrl:s.placeholderDataUrl,hoverScale:!0,className:"w-full aspect-[4/5] md:aspect-[3/4] mb-4"}),e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("p",{className:"text-xs font-sans uppercase tracking-wider text-revista-gold",children:t}),e.jsx("h3",{className:"font-headline text-xl font-medium text-revista-black leading-tight group-hover:text-revista-gold transition-colors",children:s.title}),e.jsxs("p",{className:"text-xs font-sans uppercase tracking-wide text-revista-text/60",children:["De ",s.author]})]})]},s.id))}),e.jsx("div",{className:"lg:col-span-6 order-1 lg:order-2",children:e.jsxs("a",{href:`#/article/${l.slug}`,className:"group cursor-pointer block lg:h-full pb-2 lg:pb-0",children:[e.jsx(n,{src:l.image_url,alt:l.title,size:"large",placeholderDataUrl:l.placeholderDataUrl,priority:!0,hoverScale:!0,hoverDuration:700,className:"w-full aspect-[4/5] lg:h-full lg:aspect-auto lg:min-h-full"}),e.jsxs("div",{className:"space-y-2 text-center mt-4 pb-8",children:[e.jsx("p",{className:"text-xs font-sans uppercase tracking-wider text-revista-gold",children:t}),e.jsx("h3",{className:"font-headline text-2xl md:text-3xl lg:text-4xl font-semibold text-revista-black leading-tight group-hover:text-revista-gold transition-colors",children:l.title}),e.jsxs("p",{className:"text-xs font-sans uppercase tracking-wide text-revista-text/60",children:["De ",l.author]})]})]})}),e.jsx("div",{className:"lg:col-span-3 space-y-10 lg:space-y-8 order-3",children:j.map(s=>e.jsxs("a",{href:`#/article/${s.slug}`,className:"group cursor-pointer block pb-2",children:[e.jsx(n,{src:s.image_url,alt:s.title,size:"small",placeholderDataUrl:s.placeholderDataUrl,hoverScale:!0,className:"w-full aspect-[4/5] md:aspect-[3/4] mb-4"}),e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("p",{className:"text-xs font-sans uppercase tracking-wider text-revista-gold",children:t}),e.jsx("h3",{className:"font-headline text-xl font-medium text-revista-black leading-tight group-hover:text-revista-gold transition-colors",children:s.title}),e.jsxs("p",{className:"text-xs font-sans uppercase tracking-wide text-revista-text/60",children:["De ",s.author]})]})]},s.id))})]})]}),x.length>0&&e.jsx("div",{className:"bg-revista-ivory py-section",children:e.jsxs("div",{className:"container-revista",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"h-px w-full bg-revista-separator"}),e.jsxs("h2",{className:"font-sans text-lg uppercase tracking-[0.3em] text-revista-black font-medium text-center py-6",children:["Mai multe articole din ",t]}),e.jsx("div",{className:"h-px w-full bg-revista-separator"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 md:gap-8",children:x.map(s=>e.jsxs("a",{href:`#/article/${s.slug}`,className:"group cursor-pointer block pb-2",children:[e.jsx(n,{src:s.image_url,alt:s.title,size:"medium",placeholderDataUrl:s.placeholderDataUrl,hoverScale:!0,className:"w-full aspect-[4/5] mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-sans uppercase tracking-wider text-revista-gold",children:t}),e.jsx("h3",{className:"font-headline text-lg font-medium text-revista-black leading-tight group-hover:text-revista-gold transition-colors line-clamp-3",children:s.title}),e.jsxs("p",{className:"text-xs font-sans uppercase tracking-wide text-revista-text/60",children:["De ",s.author]})]})]},s.id))})]})})]})}export{A as C};
